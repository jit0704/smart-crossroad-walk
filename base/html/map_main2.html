<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>지도</title>
    <script src="/base/js/lib/jquery-3.5.1.min.js"></script>
    <script src="/base/js/lib/jquery-ui.min.js"></script>
    <script src="/base/js/lib/semantic.min.js"></script>
    <script src="/base/js/lib/jquery.modal.min.js"></script>
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=requestAnimationFrame,Element.prototype.classList,URL"></script>
    <script src="http://map.ngii.go.kr/emap/js/map/OpenLayers-6.4.3.js"></script>
    <script src="http://map.ngii.go.kr/nps/common/lib/proj4js/proj4.js"></script>
    <script src="http://map.ngii.go.kr/openapi/wmts_ngiiMap_v6.4.3.js?apikey=04trYP9_xwLAfALjwZ-B8g"></script>
    <!-- includeHTML.js : 퍼블리싱 확인용 include -->
    <script src="/base/js/common/includeHTML.js"></script>
    <script src="/base/js/common/ui.js"></script>
    <link rel="stylesheet" href="http://map.ngii.go.kr/emap/css/map/OpenLayers-6.4.3.css" />
    <link rel="stylesheet" href="/base/css/common.css" />
  </head>
  <body>
    <div class="wrapper">
      <!-- GNB -->
      <nav class="gnb" include-html="/base/html/common/gnb.html"></nav>

      <main class="ly-container">
        <div id="map1" class="ly-map">
          <!-- 교차로 아이콘 -->
          <div class="los-display lv-a" style="left: 400px; top: 382px">
            <i class="ico-cr js-no-dimed-popup-call" data-target="crossing-popup"><span class="screen-out">교차로</span></i>

            <i class="traffic-display top c-red" style="transform: rotate(0deg)"></i>
            <i class="traffic-display bottom c-orange" style="transform: rotate(0deg)"></i>
            <i class="traffic-display left" style="transform: rotate(0deg)"></i>
            <i class="traffic-display right" style="transform: rotate(0deg)"></i>
          </div>

          <!-- 230815 : 돌발 아이콘 -->
          <i class="ico-triangle-exclamation c-red" style="left: 453px; top: 378px"><span class="screen-out">돌발 발생</span></i>

          <!-- 230815 : 교차로 클릭시 나오는 팝업 -->
          <div id="crossing-popup" class="map-popup">
            <div class="inner">
              <div class="bind">
                <header class="map-popup-header">공릉역 사거리</header>
                <div class="map-popup-content">
                  <div class="line-box-container">
                    <div class="box-row">
                      <div class="box is-label">
                        <em class="tit">LOS 등급</em>
                        <span class="box-label c-violet">FFF 등급</span>
                      </div>
                      <div class="box">
                        <em class="tit">차량 통행량</em>
                        <span class="txt">3,100대</span>
                      </div>
                    </div>
                    <!-- //box-row -->
                    <div class="box">
                      <em class="tit">카메라 상태</em>
                      <span class="txt-normality">정상</span>
                      <!-- <span class="txt-disorder">카메라 이상(192.168.172.130)</span> -->
                    </div>
                    <div class="box-column">
                      <div class="box">
                        <em class="tit">함체 상태</em>
                      </div>
                      <div class="box">
                        <table class="state-tbl">
                          <colgroup>
                            <col style="width: 15%" />
                            <col />
                            <col style="width: 15%" />
                            <col />
                          </colgroup>
                          <tbody>
                            <tr>
                              <th>팬</th>
                              <td>
                                <div class="bind">
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state1" />
                                    <span>ON</span>
                                  </label>
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state1" />
                                    <span>OFF</span>
                                  </label>
                                </div>
                              </td>
                              <th>히터</th>
                              <td>
                                <div class="bind">
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state2" />
                                    <span>ON</span>
                                  </label>
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state2" />
                                    <span>OFF</span>
                                  </label>
                                </div>
                              </td>
                            </tr>
                            <tr>
                              <th>앞문</th>
                              <td>
                                <div class="bind">
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state3" />
                                    <span>열림</span>
                                  </label>
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state3" />
                                    <span>닫힘</span>
                                  </label>
                                </div>
                              </td>
                              <th>뒷문</th>
                              <td>
                                <div class="bind">
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state4" />
                                    <span>열림</span>
                                  </label>
                                  <label class="radio-txt2 rounded">
                                    <input type="radio" name="state4" />
                                    <span>닫힘</span>
                                  </label>
                                </div>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- //box-column -->
                  </div>
                  <!-- //line-box-container -->
                </div>
                <!-- //map-popup-content -->
                <div class="map-popup-btn-group">
                  <a href="#" class="ui primary basic button rounded">교차로 상세</a>
                  <a href="#" class="ui primary basic button rounded">지점 관리</a>
                  <a href="#" class="ui primary basic button rounded">도로 관리</a>
                </div>
                <!-- //map-popup-btn-group -->
              </div>
              <!-- //bind -->
              <div class="bind">
                <header class="map-popup-header">돌발 발생</header>
                <div class="map-popup-content">
                  <div class="line-box-container">
                    <div class="box is-label">
                      <em class="tit">유형</em>
                      <span class="box-label c-pink">역주행</span>
                    </div>
                    <div class="box">
                      <em class="tit">일시</em>
                      <span class="txt">2021-08-06 16:30:12</span>
                    </div>
                    <div class="box">
                      <em class="tit">위치</em>
                      <span class="txt">공릉역 사거리, 태릉입구역 방면</span>
                    </div>
                    <div class="box">
                      <em class="tit">차로</em>
                      <span class="txt">3차로</span>
                    </div>
                  </div>
                </div>
                <!-- //map-popup-content -->
                <div class="map-popup-btn-group">
                  <a href="#" class="ui primary basic button rounded">돌발 상세 정보</a>
                </div>
                <!-- //map-popup-btn-group -->
              </div>
              <!-- //bind -->
            </div>
            <!-- //inner -->
          </div>
          <!-- //map-popup -->
        </div>
        <!-- //ly-map -->
      </main>
      <!-- //ly-container -->

      <footer class="ly-copyright" include-html="/base/html/common/footer.html"></footer>
    </div>
    <!-- //wrapper -->

    <script>
      // map init
      window.onload = function () {
        var map1 = new ngii_wmts.map('map1', { zoom: 6 });
      };

      // 230815 팝업 호출 함수
      function noDimedPopup() {
        $('.js-no-dimed-popup-call').on('click', function () {
          var $this = $(this);
          var $top = $this.offset().top;
          var $left = $this.offset().left;
          var $target = $this.data('target');
          var $popup = $('#' + $target);
          var $popupTop = $popup.outerHeight(true);
          var $popupLeft = $popup.outerWidth(true) / 2;
          if ($popup.css('display') !== 'block') {
            $popup
              .css({
                top: $top - $popupTop,
                left: $left - $popupLeft - 35,
              })
              .fadeIn(200);
          }
        });
      }
      noDimedPopup();
    </script>
  </body>
</html>
